#include "util.h"
#include "game.h"

void title() {
	printf("########### ######### ########### #########  ### #########\n");
	printf("     #      #              #      #        #  #  #\n");
	printf("     #      #              #      #        #  #  #\n");
	printf("     #      #########      #      ##########  #  #########\n");
	printf("     #      #              #      #        #  #          #\n");
	printf("     #      #              #      #        #  #          #\n");
	printf("     #      #########      #      #        # ### #########\n");
	printf("press any key to start a game\n");
}

int blocks[7][4][4][4] = {
{{0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0},{0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0},
 {0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0},{0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0}},
{{0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0},{0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0},
 {0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0},{0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0}},
{{0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0},{0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0},
 {0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0},{0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0}},
{{0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0},{0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0},
 {0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0},{0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0}},
{{0,0,0,0,0,0,1,0,1,1,1,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0},
 {0,0,0,0,0,0,0,0,1,1,1,0,1,0,0,0},{0,0,0,0,0,1,0,0,0,1,0,0,0,1,1,0}},
{{0,0,0,0,1,0,0,0,1,1,1,0,0,0,0,0},{0,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0},
 {0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0},{0,0,0,0,0,1,1,0,0,1,0,0,0,1,0,0}},
{{0,0,0,0,0,1,0,0,1,1,1,0,0,0,0,0},{0,0,0,0,0,1,0,0,0,1,1,0,0,1,0,0},
 {0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0},{0,0,0,0,0,1,0,0,1,1,0,0,0,1,0,0}}
};

void resetmap() {
	for (int i = 0; i < main_y; i++) {
		for (int j = 0; j < main_x; j++) {
			won[i][j] = 0;
			bon[i][j] = 100;
		}
	}
	for (int i = 1; i < main_y - 1; i++) {
		won[i][0] = wall;
		won[i][main_x - 1] = wall;
	}
	for (int i = 0; i < main_x; i++) {
		won[main_y - 1][i] = wall;
	}
}




void drawmap() {
	for (int i = 0; i < main_y; i++) {
		for (int j = 0; j < main_x; j++) {
			if (bon[i][j] != won[i][j]) {
				gotoxy(mainn_x+j, mainn_y+i);
				switch (won[i][j]) {
					case empty:
						printf(" ");
						break;
					case ceilling:
						printf(".");
						break;
					case wall:
						printf("x");
						break;
					case inactive_block:
						printf("□");
						break;
					case active_block:
						printf("■");
						break;
				}
			}

		}
	}

	for (int i = 0; i < main_y; i++) {  
		for (int j = 0; j < main_x; j++) {
			bon[i][j] = won[i][j];
		}
	}
}

void newblock() {
	int type, rota, typec,xx,yy;
	xx = (main_x / 2);
	yy = 0;
	typec = rand() % 7;
	type = typec;
	rota = 0;
	for (int i = 0; i < 4; i++) {
		for (int j = 0; i < 4; j++) {
			if (blocks[type][rota][i][j] == 1) {
				won[i][j] = active_block;
			}
		}
	}
	for (int i = 0; i < 4; i++) {
		for (int j = 0; i < 4; j++) {
			if (blocks[typec][rota][i][j] == 1) {
				gotoxy(20 + i, 6 + j);
				printf("■");
				
			}
		}
	}
}



